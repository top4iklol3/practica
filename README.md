# –û–±–ª–∞—á–Ω–æ–µ —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (REST API)

–°–µ—Ä–≤–∏—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å –∏–∑–æ–ª—è—Ü–∏–µ–π –ø–æ —Ä–µ—Å—É—Ä—Å–∞–º (–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä/–ø—Ä–æ–µ–∫—Ç). –ö–∞–∂–¥–æ–º—É —Ä–µ—Å—É—Ä—Å—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ñ–∞–π–ª–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Swagger/REST API.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÇ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã** ‚Äî `resourceKey` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- üì§ **–ó–∞–≥—Ä—É–∑–∫–∞ –∫—Ä—É–ø–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤** ‚Äî –¥–æ 1.5 –ì–ë –Ω–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- üìÅ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∞–º–∏** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º –æ—á–∏—â–µ–Ω–∏–µ–º
- üì• **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ** ‚Äî –ø–æ—Ç–æ–∫–æ–≤–æ–µ, –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ —Ü–µ–ª–∏–∫–æ–º –≤ –ø–∞–º—è—Ç—å
- üß≠ **–ù–∞–≤–∏–≥–∞—Ü–∏—è** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∞–ø–∫–∏ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- üñºÔ∏è **–ò–∫–æ–Ω–∫–∏ —Ñ–∞–π–ª–æ–≤** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `appsettings` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞—é—Ç—Å—è –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é
- üîê **–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CORS** ‚Äî —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üìú **Swagger –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** ‚Äî UI –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `/swagger`, –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- .NET 8.0 SDK –∏–ª–∏ –≤—ã—à–µ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω .NET 8.0 SDK:
   ```bash
   dotnet --version
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `appsettings.json` –ø–æ –æ–±—Ä–∞–∑—Ü—É `appsettings.json.example` –∏ –∑–∞–¥–∞–π—Ç–µ:
   ```json
   "ConnectionStrings": {
     "DefaultConnection": "Host=localhost;Port=5432;Database=filestorage;Username=postgres;Password=–≤–∞—à_–ø–∞—Ä–æ–ª—å"
   },
   "Storage": {
     "BasePath": "Storage"
   },
   "Cors": {
     "AllowedOrigins": [ "https://trusted-ui.your-company.com" ]
   },
   "FileIcons": {
     "Default": "üìÑ",
     "Folder": "üìÅ",
     "Url": "üîó",
     "Extensions": {
       ".pdf": "üìï",
       ".docx": "üìò",
       "...": "..."
     }
   }
   ```

3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   dotnet restore
   ```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   dotnet run
   ```
   
5. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5000/swagger` ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ API.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
FileStorage/
‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îî‚îÄ‚îÄ FileStorageController.cs     # REST API (Swagger-first)
‚îú‚îÄ‚îÄ Options/                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (storage, icons, cors)
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ IStorageService.cs
‚îÇ   ‚îú‚îÄ‚îÄ StorageService.cs
‚îÇ   ‚îî‚îÄ‚îÄ Models/                      # DTO –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ Storage/                         # –ë–∞–∑–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ñ–∞–π–ª–æ–≤ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ Program.cs
‚îî‚îÄ‚îÄ FileStorage.csproj
```

## API Endpoints

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç —É–∫–∞–∑–∞–Ω–∏—è `resourceKey`:

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| `GET`    | `/api/resources/{resourceKey}/storage/list?path=` | –ü–æ–ª—É—á–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ |
| `POST`   | `/api/resources/{resourceKey}/storage/upload?path=` | –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã (multipart/form-data) |
| `GET`    | `/api/resources/{resourceKey}/storage/download?path=` | –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª |
| `POST`   | `/api/resources/{resourceKey}/storage/folder?path=` | –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É |
| `DELETE` | `/api/resources/{resourceKey}/storage/item?path=` | –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –∏–ª–∏ –ø–∞–ø–∫—É |

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –Ω–∞ list

```json
{
  "currentPath": "docs/manuals",
  "items": [
    {
      "type": 0,
      "filename": "reports",
      "filenameWithoutExtension": "reports",
      "path": "docs/manuals/reports",
      "icon": "üìÅ"
    },
    {
      "type": 1,
      "filename": "price-list.xlsx",
      "filenameWithoutExtension": "price-list",
      "path": "docs/manuals/price-list.xlsx",
      "icon": "üìä"
    }
  ]
}
```

- `type = 0` ‚Äî –ø–∞–ø–∫–∞  
- `type = 1` ‚Äî —Ñ–∞–π–ª  
- `type = 2` ‚Äî URL (—Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.url`)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º –¥–æ–±–∞–≤—å—Ç–µ:
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Ä–µ—Å—É—Ä—Å–∞–º
- –ö–≤–æ—Ç—ã –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞—É–¥–∏—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –†–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

